

### 
- 이 콘텐츠는  **스톰 사용 설명서** 의 세 번째 부분으로,  주식   전략 탭 의 사용법을 자세히 설명합니다. 다양한  **전략 변수** 와 기본 설정을 통해  주식 백테스팅을 효과적으로 진행하는 방법을 소개합니다. 특히 매수 및 매도 전략의 설정에 대해 구체적이고 실용적인 예시를 통해 접근하며,  데이터 길이 와  평균값 의 중요성을 강조합니다. 따라서  주식 자동 매매 전략을 구축하고 싶어 하는 개인이나 전문가에게 매우 유익한 정보를 제공합니다. 이러한 내용을 통해  **백테스팅** 과  **전략 ** **최적화** 의 기본 원칙을 익힐 수 있습니다.  
### 1. 📋 스톰 사용 설명서 초기 설정 및 백테스팅 준비
- 스톰 사용 설명서 는  주식   전략 탭 과 코인  전략 탭 을 다루며, 이번 시간에는  주식   전략 탭 사용법을 설명한다.  
- 백테스팅을 위해 백테컴으로 접속하고 화면을 조정하며, 초기화된 계정과 전략을 설정하여 64비트로 시스템을 실행해야 한다.  
- 32비트는 데이터가 적을 때만 사용 가능하며, 스톰은 1년 이상의 데이터를 처리하므로 64비트를 사용한다.  
- 데이터는 별도로 압축하고 Collector Underbar Database를 만들어 백테스팅 준비를 완료해야 한다.  
- 기본적으로 백테스팅을 위한 환경 설정과 초기화를 통해 최적의 상태로 만들 필요가 있다.  
- 
### 2. 📈 주식 전략 탭 설정 방법
- 주식   전략 탭 을 클릭하면  **전략 편집기**  상태가 되어, 기본적으로는 전략이 저장되어 있지 않기 때문에  **로딩을 눌러도 아무것도 나오지 않는다** .  
- 주식 전략에서 사용할 변수 목록에  **n이 붙어 있는 것** 은 이전 값을 조회하는 용도로, 예를 들어  체결 강도 N(1)은 한 틱 전, 즉 1초 전의  체결 강도 를 검색할 수 있다.  
- 체결 강도 평균 같은 경우 보통  **30틱** 을 사용해  평균값 을 계산하기 때문에, N값을 사용할 때는  데이터 길이 가 이 이상 쌓여 있어야 한다.  
- **데이터 길이** 가 30보다 클 때 현재가 N30을 사용해야 하며, 입형과 같은  평균값 을 사용할 시에는  데이터 길이 가 80 이상이어야 한다고 설명한다.  
- 각 변수의 자세한 설명이 문서 밑부분에 있으며,  **호가 단위** 와  **시분초** 에 대한 정보도 포함되어 있다.  
- 
### 3. 📈 매수 변수 설정 및 매수 조건 구성
- 매수 변수는 매수 시점에 대한 정보를 별도로 포함하며, 이는 최고  수익률 , 최저  수익률 , 보유 수량, 매수 시간 등을 포함한다.  
- 매수 변수는 매수가 출려(추)로 넘어가며, 매수하지 않을 조건을 작성하여야 한다.  
- 주식 일봉이나 분봉을 사용할 경우, 매수 변수는 이러한 기준에 따라 다르게 설정된다.  
- 매수 조건 설정은 'if not' 문을 이용하여, 조건이 불충족되면 매수는 자동으로 '펄스'가 된다.  
- 예시로, 등당율이 3%에서 25% 사이일 경우 매수를 고려하며, 'if' 및 'elif' 구조를 따라 세부 조건을 검토하여 매수 시그널을 구성한다.  
- 
### 4. 📉 매도 전략 설정 및 저장 방법
- 매도 전략에는  **손절 라인 청산** ,  **익절 라인 청산** ,  **수준율 보존 청산** ,  **보유시간 기준 청산**  같은 다양한 방법이 있다.  
- 수익률 이  **마이너스 2%** 가 되면 매도하고,  **3% 이상** 이 되면 매도하는 것이 기본 설정이다.  
- **최고 ** **수익률** 이 3% 이상일 때 대비  **25% 하락** 하면 매도하며, 매수 시간은  **1800초(30분)**  이상일 때 매도한다.  
- 매도 전략은 설정 후  **저장 과정** 을 거쳐야 하며, 오류가 없을 경우 테스트를 완료하고 저장이 완료된다.  
- 매도 전략 저장 시  **컨트롤 키** 를 누른 상태에서 저장 버튼을 누르면 테스트 없이 바로 저장할 수 있다.  
- 
### 5. 📊 스톰 사용 설명서 백테스트 및 전략 최적화
- **백테스트**  실행에 필요한 데이터베이스는 반드시 이미 생성되어 있어야 하며, 큰 데이터는 분할해서 프로세스를 분할해야 동일한 속도로  백테스트 가 진행된다.  
- **백테스트** 의 성능은 CPU 코어 수와 램 용량에 영향 받으며, 과도한 코어 수는 가성비가 떨어질 수 있어 일반적으로 16코어 CPU와 128GB 램이 추천된다.  
- **배팅 금액** 에 따라  수익률 은 달리 측정될 수 있으며, 이를 통해 매매 성능 지수 및 예상 수익을  최적화 할 수 있다.  
- **전략 수치의 ** **최적화** 는 각 조건들이 상호작용을 줄 수 있으므로,  최적화 편집기를 통해 각 변수의 범위를 조정해야 하며 이를 통해 수익성을 극대화할 수 있다.  
- **검증 ** **최적화** ** 방식** 은 최근 데이터를 기준으로 과  최적화 를 방지하고,  **교차 검증 ** **최적화** 는 여러 기간에 걸쳐 안정성을 높이며,  **분할 검증 ** **최적화** 는 구간별로 교차해 검증을 수행한다.  
### 5.1. 기본 조작 방법 및 단축키
- 하나의 항목을 선택하려면  **F2** 를 누르면 된다.  
- **3** 을 누르면 다른 창으로 이동할 수 있으며,  **4** 를 누르면 저장이 가능하다.  
- 저장 시  **Ctrl** 와  **F4** 를 함께 누르면 바로 저장된다.  
- 매도 작업도 동일한 방식으로 진행할 수 있다.  
- **F5** ,  **6** ,  **7**  버튼은 각각 로딩, 글자 표시, 저장 기능을 하며,  **Ctrl** 을 함께 누르면 작동하지 않는다.  
### 5.2. 매수 및 매도 전략의 시작과 중지
- 저장 후 매수 전략을 바로 시작하면  **장중** 에 즉시 시작된다.  
- 실제 운영 중에 매수 전략을 수정할 필요는 드물며, 필요 시에는 전략을 직접 수정하기도 한다.  
- 매수 전략은 즉시 시작할 수 있고 중지도 가능하며, 시작 시에는  **검은색** 으로 표시된다.  
- 매도 전략도 동일한 방식으로 시작할 수 있으며, 매도 전략이 없으면 매도는 실행되지 않는다.  
### 5.3. ️ 변수 편집기와 예제 전략 설명
- 변수 편집기 에는  **예제 버튼** 이 있어, 버튼을 누르면 기본 예제를 불러올 수 있다.  
- 예제 전략 을 선택하고 매도 전략 2로 지정하여  **Ctrl F8** ,  **Ctrl F4**  키로 저장할 수 있다.  
- 저장한  예제 전략 을 로딩하면 매도 전략에 두 가지 선택지가 제공된다.  
- 거래대금은 억 단위로 표시되며, 체계 강도는 100 이상, 평균 29% 이상을 기준으로 매도 전략을 설정할 수 있다.  
- 백테스트 기능을 사용하여 설정된 전략을 테스트할 수 있다.  
### 5.4. ️ 백테스트 데이터베이스 및 엔진 로딩
- **백테스트** 를 실행하려면  **백테 DB** 가 필요하며, 이는 '20230331' 같은 날짜 형식으로 만들어진다.  
- 데이터베이스 안에는 약 7기가의 백테 DB가 있으며, 이는 이미 미리 만들어진 것이다.  
- 백테스트 실행 시 엔진이 로딩되는데, 이는 3월 23일부터 현재까지의 데이터를 포함하고  **멀티스** 도 자동으로 입력된다.  
- 백테스트 는 단순히 실행 버튼을 누르는 것만으로는 바로 시작되지 않으며, 로딩 과정이 동반된다.  
### 5.5. 백테스트를 위한 최적의 CPU와 메모리 설정
- 스톰의  **백테스트** 를 수행할 때는 많은 CPU 코어가 유리하나 가격 대비 성능을 고려해야 하며, 일반적으로 16코어 CPU를 선호한다.  
- 최근 출시된  **13900K** 와  **7950X** 가 인기를 끌고 있으며, 과거에는 5950 또는 12900K를 사용하였다.  
- 램 용량은 적어도 처음에 64기가로 시작하여, 이후에 같은 것을 추가하여 최대 128기가로 확장할 수 있다.  
- CPU 코어와 램의 적절한 설정이  백테스트 성능을  최적화 하는 데 매우 중요하다.  
### 5.6. ️ 백테스트 프로세스 관리 방법
- **백테로딩** 은 별도의 프로세스로 지정한 개수만큼 생성되어, 엔진이 구동된다.  
- 구동 시, 데이터는  **종목 코드별로**  프로세스가 분할하여 관리한다.  
- 각 프로세스가 가지는 데이터의 양은 비슷해야 한다.  
- 데이터 크기를 고려하여 48개의 프로세스로 골고루 나누는 과정을 거친다.  
### 5.7. 백테스트 로딩과 실행 과정
- **백테스트** 는 프로그램이 종료되지 않는 한, 여러 번 반복 실행할 수 있다.  
- 로딩 시간이 다소 소요되며, 보통 약 2분이 걸린다.  
- 백테스트 로딩이 완료되면, 오류 발생 시 또는 날짜 변경 시 '컨트롤 백 테스트' 버튼을 눌러 로딩을 다시 실행할 수 있다.  
### 5.8. 백테스트와 최적화 과정을 위한 기본 설정
- **날짜**  설정은 백테스팅에 필수이며, 특정 날짜를 지정하지 않으면  백테스트 를 수행할 수 없다.  
- **매수 및 매도 전략** 은  예제 전략 을 바탕으로 다양한 설정이 가능하며, 기본적인 전략 요소들을 사용하여  최적화 를 시도한다.  
- **그래프와 분석** 은 거래 횟수와  수익률 을 확인할 수 있으며, 그래프는 빨간색과 파란색 막대로 수익과 손실을 구분한다.  
- **전략의 설정 및 수정** 은 "Summer Camp" 전략을 통해 다양한  최적화 변수의 변화를 확인하며 수행한다.  
- **MDD(** **최대 낙폭** **)와 ** **수익률**  간의 관계를 고려하여 초반에는 MDD 대비  수익금 을 중요시하고, 이후에는  수익률 기준으로 전략을 수정한다.  
### 5.9. 전진 분석과 조건 편집기의 연계 사용
- **전진 분석** 에서는  **확인 기간** 을 순차적으로 설정하여 데이터를 검증하는데 사용하며, 그래프로 시각화될 수 있다.  
- 데이터가 많을 경우에는 20주 이상의 길이를 설정하여  **전진 분석** 을 수행하는 것이 효과적이다.  
- **조건 편집기** 는 매수 및 매도 전략 조건을  최적화 하는 도구로, 여러 조건을 무작위로 설정 후  백테스트 를 통해 가장 유용한 조건을 찾는다.  
- 무작위로 설정된 조건 중 유용하지 않은 것은 버리고, 결과 값으로 조건 체제 카드를 활용할 수 있다.  
- **백파인더** 는  백테스트 의 역개념으로 사용자가 설정한  등락률 과 미래 틱 수를 통해 데이터를 분석하며, 특정 포인트와 공통점을 찾아내는데 중점을 둔다.  
### 
- 
