# 2025-12-25 백테스팅 출력 통합/리팩토링

## 목표
- 기존 기능/결과 유지
- 백테스팅 출력 경로 통합
- 대형 모듈 분리로 유지보수성 개선

## 주요 변경
1) **출력 경로 통합**
- 기본 출력: `backtester/backtesting_output/<save_file_name>/`
- 기존 `backtester/graph/`, `backtester/segment_outputs/`는 legacy로 유지(이전 실행 파일 보관)
- 통합 리포트/condition_study.md가 동일 폴더에 생성되도록 정리

2) **세그먼트 분석 출력 경로 동기화**
- Phase1/2/3, 템플릿 비교, 모드 비교, 멀티오브젝티브, 고급 탐색 등
- 기본 출력 경로를 `detail.csv`가 있는 폴더로 자동 해석
- 필요 시 `output_dir` 명시로 기존 동작 유지

3) **백테스팅 분석 모듈 분리**
- `backtester/back_static.py`는 오케스트레이션 및 기존 API 유지
- 새 분리 모듈
  - `backtester/analysis/plotting.py` (PltShow/PltAnalysisCharts/PltBuySellComparison)
  - `backtester/analysis/metrics.py` (CalculateDerivedMetrics/AnalyzeFilterEffects)
  - `backtester/analysis/exports.py` (ExportBacktestCSV)
  - `backtester/analysis/results.py` (GetResultDataframe/AddMdd/GetBackResult)
  - `backtester/analysis/indicators.py` (AddAvgData/GetIndicator)
  - `backtester/analysis/optuna_server.py` (RunOptunaServer)
  - `backtester/analysis/text_utils.py` (로그/코드블록 헬퍼)

4) **UI/문서 업데이트**
- UI 리셋 및 이미지 조회가 `backtesting_output` 우선 사용
- 주요 문서에 새로운 모듈 구조 및 출력 경로 반영

## 호환성
- 기존 함수 호출 경로 유지(`backtester/back_static.py`에서 동일 함수명 제공)
- legacy 출력 폴더는 삭제하지 않음 (이전 결과 확인 가능)

## 참고
- 최신 기준선 시나리오: `stock_bt_C_T_900_920_U2_B_20251225062904`
