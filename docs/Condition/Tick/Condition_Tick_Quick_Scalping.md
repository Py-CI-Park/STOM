# 조건식 (Condition) - Quick Scalping Strategy

- STOM 주식 자동거래에 사용하기 위한 조건식 문서
- Back_Testing_Guideline_Tick.md에 있는 조건식을 사용하여 만든 조건식

## 목차
- [조건식 (Condition) - Quick Scalping Strategy](#조건식-condition---quick-scalping-strategy)
  - [목차](#목차)
  - [소개](#소개)
  - [가이드라인](#가이드라인)
    - [저장 이름 규칙](#저장-이름-규칙)
- [Condition - Quick Scalping](#condition---quick-scalping)
  - [조건식](#조건식)
    - [매수 조건식](#매수-조건식)
    - [매도 조건식](#매도-조건식)

## 소개

이 문서는 **빠른 스캘핑 전략(Quick Scalping Strategy)**을 설명합니다. 장 초반(09:00:00 ~ 09:20:00) 짧은 시간 내에 작은 수익을 반복적으로 획득하는 초단타 전략입니다.

### 전략 개요
- **거래 시간**: 90000 ~ 92000 (9시 ~ 9시 20분)
- **목표**: 빠른 진입/청산으로 소액 다회 수익
- **핵심 지표**: 체결강도, 초당거래대금, 즉시 반응
- **리스크 관리**: 극도로 짧은 보유 시간 (3~5분)

## 가이드라인

- 모든 조건식은 Python으로 작성되어 있으며, 주식 거래의 자동화를 목표로 합니다.
- 각 조건식은 특정 조건을 만족할 때 매수 또는 매도를 실행합니다.
- 초단타 전략으로 빠른 의사결정이 중요합니다.

### 저장 이름 규칙

1. **기본 규칙**:
   - `C`: Condition을 의미합니다.
   - `QS`: Quick Scalping을 의미합니다.
   - `B`: 매수 조건식을 의미합니다.
   - `S`: 매도 조건식을 의미합니다.

2. **예시**:
   - `C_QS_B`: 빠른 스캘핑 전략의 매수 조건식
   - `C_QS_S`: 빠른 스캘핑 전략의 매도 조건식

---

# Condition - Quick Scalping

## 조건식

### 매수 조건식

```python
# Quick Scalping Strategy - 초단타 빠른 진입 전략
# 거래 시간: 90000 ~ 92000 (9시 ~ 9시 20분)

매수 = False

# 시간 제한: 장 초반 20분만 거래
if not (90000 <= 시분초 < 92000):
    매수 = False

# 기본 필터링 - 활발한 종목만
elif not (1200 < 현재가 <= 35000):
    매수 = False
elif not (1.0 < 등락율 <= 28.0):
    매수 = False
elif not (현재가 < VI아래5호가):
    매수 = False
elif 라운드피겨위5호가이내:
    매수 = False

# 시가총액별 조건
elif 시가총액 < 2000:
    # 소형주 (2000억 미만) - 더 보수적
    # 즉시 반응: 초당거래대금 폭증
    if not (초당거래대금 > 초당거래대금N(1) * 2.0):
        매수 = False
    elif not (초당거래대금 > 초당거래대금평균(30) * 2.8):
        매수 = False
    # 체결강도 급상승
    elif not (체결강도 > 체결강도N(1)):
        매수 = False
    elif not (체결강도 > 150):
        매수 = False
    # 연속 상승
    elif not (현재가 > 현재가N(1) and 현재가N(1) > 현재가N(2)):
        매수 = False
    # 매수 압도
    elif not (초당매수수량 > 초당매도수량 * 2.0):
        매수 = False
    elif not ((초당매수수량 - 초당매도수량) * 현재가 / 1_000_000 > 60):
        매수 = False
    # 등락율 상승 중
    elif not (등락율 > 등락율N(1)):
        매수 = False
    elif not (등락율각도(30) > 7):
        매수 = False
    # 고가 근처
    elif not (현재가 > 고가 - (고가 - 저가) * 10 / 100):
        매수 = False
    # 거래량 급증
    elif not (전일비 > 140):
        매수 = False
    elif not (전일동시간비 > 190):
        매수 = False
    # 회전율
    elif not (회전율 > 1.8):
        매수 = False
    # 최소 거래대금
    elif not (당일거래대금 > 6 * 100):
        매수 = False
    # 호가 압력
    elif not (매수총잔량 > 매도총잔량):
        매수 = False

else:
    # 중대형주 (2000억 이상)
    # 즉시 반응: 초당거래대금 폭증
    if not (초당거래대금 > 초당거래대금N(1) * 1.6):
        매수 = False
    elif not (초당거래대금 > 초당거래대금평균(30) * 2.2):
        매수 = False
    # 체결강도 급상승
    elif not (체결강도 > 체결강도N(1)):
        매수 = False
    elif not (체결강도 > 135):
        매수 = False
    # 연속 상승
    elif not (현재가 > 현재가N(1) and 현재가N(1) > 현재가N(2)):
        매수 = False
    # 매수 압도
    elif not (초당매수수량 > 초당매도수량 * 1.6):
        매수 = False
    elif not ((초당매수수량 - 초당매도수량) * 현재가 / 1_000_000 > 120):
        매수 = False
    # 등락율 상승 중
    elif not (등락율 > 등락율N(1)):
        매수 = False
    elif not (등락율각도(30) > 9):
        매수 = False
    # 고가 근처
    elif not (현재가 > 고가 - (고가 - 저가) * 15 / 100):
        매수 = False
    # 거래량 급증
    elif not (전일비 > 110):
        매수 = False
    elif not (전일동시간비 > 140):
        매수 = False
    # 회전율
    elif not (회전율 > 1.3):
        매수 = False
    # 최소 거래대금
    elif not (당일거래대금 > 40 * 100):
        매수 = False
    # 호가 압력
    elif not (매수총잔량 > 매도총잔량 * 0.9):
        매수 = False
```

### 매도 조건식

```python
# Quick Scalping Strategy - 즉시 익절/손절 매도 전략
# 극도로 짧은 보유 시간

매도 = False

# 상한가 근접 시 매도
if 등락율 > 29.5:
    매도 = True

# 빠른 익절/손절 (스캘핑)
elif 수익률 >= 1.5:  # 1.5% 익절
    매도 = True
elif 수익률 <= -1.0:  # 1% 손절
    매도 = True

# 최고수익률 대비 하락 (빠른 반응)
elif 최고수익률 >= 2.0 and 수익률 < 최고수익률 - 0.8:
    매도 = True

# 시가총액별 매도 조건
elif 시가총액 < 2000:
    # 소형주 매도 조건 - 즉시 반응
    # 체결강도 급락
    if 체결강도 < 체결강도N(1) and 체결강도 < 110:
        매도 = True
    # 초당거래대금 급감
    elif 초당거래대금 < 초당거래대금N(1) * 0.7:
        매도 = True
    # 연속 하락
    elif 현재가 < 현재가N(1) and 현재가N(1) < 현재가N(2):
        매도 = True
    # 등락율 각도 급락
    elif 등락율각도(30) < 3 and 등락율각도(30) < 등락율각도(30, 1):
        매도 = True
    # 매도 우위
    elif (초당매도수량 - 초당매수수량) >= 매수총잔량 * 40 / 100:
        매도 = True
    # 호가 역전
    elif 매도총잔량 > 매수총잔량 * 1.4:
        매도 = True
    # 시간 제한 (극단적으로 짧음)
    elif 보유시간 > 300:  # 5분 이상 보유 시 무조건 매도
        매도 = True
    # 소폭 하락에도 빠른 매도
    elif 수익률 < 0.5 and 보유시간 > 180:  # 3분 이상 보유 중 수익 미미
        매도 = True

else:
    # 중대형주 매도 조건 - 즉시 반응
    # 체결강도 급락
    if 체결강도 < 체결강도N(1) and 체결강도 < 120:
        매도 = True
    # 초당거래대금 급감
    elif 초당거래대금 < 초당거래대금N(1) * 0.75:
        매도 = True
    # 연속 하락
    elif 현재가 < 현재가N(1) and 현재가N(1) < 현재가N(2):
        매도 = True
    # 등락율 각도 급락
    elif 등락율각도(30) < 5 and 등락율각도(30) < 등락율각도(30, 1):
        매도 = True
    # 매도 우위
    elif (초당매도수량 - 초당매수수량) >= 매수총잔량 * 45 / 100:
        매도 = True
    # 호가 역전
    elif 매도총잔량 > 매수총잔량 * 1.3:
        매도 = True
    # 시간 제한 (극단적으로 짧음)
    elif 보유시간 > 420:  # 7분 이상 보유 시 무조건 매도
        매도 = True
    # 소폭 하락에도 빠른 매도
    elif 수익률 < 0.7 and 보유시간 > 240:  # 4분 이상 보유 중 수익 미미
        매도 = True
```

---

**Last Update: 2025-01-18**
