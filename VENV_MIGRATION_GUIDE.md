# STOM V1 ê°€ìƒí™˜ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ğŸ“Œ ê°œìš”

STOM V1 í”„ë¡œì íŠ¸ê°€ Python ê°€ìƒí™˜ê²½ì„ ì§€ì›í•˜ë„ë¡ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì˜ì¡´ì„± ê²©ë¦¬, í™˜ê²½ ì¬í˜„ì„±, ë²„ì „ ê´€ë¦¬ ë“±ì˜ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ë³€ê²½ì‚¬í•­

### 1. ê°€ìƒí™˜ê²½ êµ¬ì¡°

```
STOM_V1/
â”œâ”€â”€ venv_32bit/          # Kiwoom API ì „ìš© (32ë¹„íŠ¸)
â”œâ”€â”€ venv_64bit/          # ë©”ì¸ ì‹œìŠ¤í…œ (64ë¹„íŠ¸)
â”œâ”€â”€ requirements_32bit.txt
â”œâ”€â”€ requirements_64bit.txt
â”œâ”€â”€ utility/             # TA-Lib íœ  íŒŒì¼ ìœ„ì¹˜
â”‚   â”œâ”€â”€ TA_Lib-0.4.27-cp311-cp311-win32.whl
â”‚   â””â”€â”€ TA_Lib-0.4.25-cp311-cp311-win_amd64.whl
â”œâ”€â”€ setup_venv.bat       # í†µí•© ê°€ìƒí™˜ê²½ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ stom_venv.bat        # ê°€ìƒí™˜ê²½ ì‹¤í–‰ (ê¸°ë³¸)
â”œâ”€â”€ stom_venv_stock.bat  # ì£¼ì‹ íŠ¸ë ˆì´ë”©
â””â”€â”€ stom_venv_coin.bat   # ì•”í˜¸í™”í íŠ¸ë ˆì´ë”©
```

### 2. ì½”ë“œ ìˆ˜ì •ì‚¬í•­

#### utility/setting.py
- ê°€ìƒí™˜ê²½ ëª¨ë“œ ìë™ ê°ì§€ ì¶”ê°€
- `PYTHON_32BIT`, `PYTHON_64BIT` ë³€ìˆ˜ ì •ì˜
- ë ˆê±°ì‹œ ëª¨ë“œ í˜¸í™˜ì„± ìœ ì§€

#### ui/ui_mainwindow.py
- Kiwoom Manager ì‹¤í–‰ ì‹œ 32ë¹„íŠ¸ Python ê²½ë¡œ ì‚¬ìš©
- `subprocess.Popen(f'{PYTHON_32BIT} ./stock/kiwoom_manager.py {port_num}')`

## ğŸš€ ì„¤ì¹˜ ë°©ë²•

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Python 3.11 (32-bit): Kiwoom API ìš©
- Python 3.11 (64-bit): ë©”ì¸ ì‹œìŠ¤í…œ ìš© (python64ë¡œ ì„¤ì¹˜)
- Windows ê´€ë¦¬ì ê¶Œí•œ

### 2. í†µí•© ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```batch
# ë‹¨ì¼ ìŠ¤í¬ë¦½íŠ¸ë¡œ ëª¨ë“  ì„¤ì • ì™„ë£Œ
setup_venv.bat
```

**setup_venv.bat ì‹¤í–‰ ë‹¨ê³„:**
1. Python ì„¤ì¹˜ í™•ì¸ (32ë¹„íŠ¸, 64ë¹„íŠ¸)
2. ê°€ìƒí™˜ê²½ ìƒì„± (venv_32bit, venv_64bit)
3. pip ì—…ê·¸ë ˆì´ë“œ
4. 32ë¹„íŠ¸ í™˜ê²½ ì˜ì¡´ì„± ì„¤ì¹˜
5. 64ë¹„íŠ¸ í™˜ê²½ ì˜ì¡´ì„± ì„¤ì¹˜
6. í™˜ê²½ ê²€ì¦ (ì•„í‚¤í…ì²˜, íŒ¨í‚¤ì§€ ì„í¬íŠ¸)
7. í†µí•© í…ŒìŠ¤íŠ¸

## ğŸ“– ì‚¬ìš© ë°©ë²•

### ê°€ìƒí™˜ê²½ ëª¨ë“œë¡œ ì‹¤í–‰

#### ê¸°ë³¸ ì‹¤í–‰
```batch
stom_venv.bat
```

#### ì£¼ì‹ íŠ¸ë ˆì´ë”© ëª¨ë“œ
```batch
stom_venv_stock.bat
```

#### ì•”í˜¸í™”í íŠ¸ë ˆì´ë”© ëª¨ë“œ
```batch
stom_venv_coin.bat
```

### ë ˆê±°ì‹œ ëª¨ë“œ (ê¸°ì¡´ ë°©ì‹)

ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ë„ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤:
```batch
stom.bat
stom_stock.bat
stom_coin.bat
```

## ğŸ” ì‘ë™ ì›ë¦¬

### ìë™ ëª¨ë“œ ê°ì§€

ì‹œìŠ¤í…œì€ `venv_64bit` í´ë”ì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬ ëª¨ë“œë¥¼ ê²°ì •í•©ë‹ˆë‹¤:

- **ê°€ìƒí™˜ê²½ ëª¨ë“œ**: `venv_64bit` í´ë” ì¡´ì¬ ì‹œ
  - `PYTHON_32BIT`: `venv_32bit/Scripts/python.exe`
  - `PYTHON_64BIT`: `venv_64bit/Scripts/python.exe`

- **ë ˆê±°ì‹œ ëª¨ë“œ**: `venv_64bit` í´ë” ì—†ì„ ì‹œ
  - `PYTHON_32BIT`: `python`
  - `PYTHON_64BIT`: `python64`

### í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ íë¦„

```mermaid
graph TD
    A[stom_venv.bat] --> B[64ë¹„íŠ¸ Pythonìœ¼ë¡œ stom.py ì‹¤í–‰]
    B --> C[MainWindow ì´ˆê¸°í™”]
    C --> D{ì£¼ì‹ ëª¨ë“œ?}
    D -->|Yes| E[32ë¹„íŠ¸ Pythonìœ¼ë¡œ kiwoom_manager.py ì‹¤í–‰]
    E --> F[32ë¹„íŠ¸ Kiwoom í”„ë¡œì„¸ìŠ¤ë“¤ ìë™ ì‹¤í–‰]
    D -->|No| G[ì½”ì¸ ëª¨ë“œ ê³„ì†]
```

**í•µì‹¬ ì›ë¦¬**:
- `kiwoom_manager.py`ê°€ 32ë¹„íŠ¸ Pythonìœ¼ë¡œ ì‹¤í–‰ë˜ë©´
- ê·¸ ì•ˆì—ì„œ ìƒì„±ë˜ëŠ” ëª¨ë“  `multiprocessing.Process`ë„ ìë™ìœ¼ë¡œ 32ë¹„íŠ¸ ìƒì†

## ğŸ§ª í…ŒìŠ¤íŠ¸

setup_venv.bat ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ í•­ëª©ë“¤ì´ ê²€ì¦ë©ë‹ˆë‹¤:

### ê²€ì¦ í•­ëª©

- âœ… ê°€ìƒí™˜ê²½ ì¡´ì¬ í™•ì¸
- âœ… Python ì•„í‚¤í…ì²˜ ê²€ì¦ (32/64ë¹„íŠ¸)
- âœ… í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„í¬íŠ¸ í…ŒìŠ¤íŠ¸
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
- âœ… ê°€ìƒí™˜ê²½ ëª¨ë“œ ê°ì§€ í…ŒìŠ¤íŠ¸
- âœ… ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ìˆ˜ í™•ì¸
- âœ… Python ë²„ì „ í™•ì¸

## ğŸ“Š ì˜ì¡´ì„± ê´€ë¦¬

### 32ë¹„íŠ¸ í™˜ê²½ (Kiwoom API ì „ìš©)

ìµœì†Œí•œì˜ íŒ¨í‚¤ì§€ë§Œ í¬í•¨ (pip_install_32.batê³¼ ë™ì¼):
- numpy==1.26.4, pandas==2.0.3
- python-telegram-bot==13.15
- psutil, pyqt5, pyzmq
- pywin32, cryptography
- TA-Lib (íœ  íŒŒì¼)

### 64ë¹„íŠ¸ í™˜ê²½ (ë©”ì¸ ì‹œìŠ¤í…œ)

ì „ì²´ íŒ¨í‚¤ì§€ í¬í•¨ (pip_install_64.batê³¼ ë™ì¼):
- ê¸°ë³¸: numpy==1.26.4, pandas==2.0.3, numba
- ì•Œë¦¼: python-telegram-bot==13.15
- ì›¹: websockets, cryptography, BeautifulSoup4
- ì‹œìŠ¤í…œ: psutil, pyqt5, PyQtWebEngine
- ìµœì í™”: optuna, optuna-dashboard, cmaes
- ì‹œê°í™”: lxml, squarify, matplotlib, pyqtgraph
- íŠ¸ë ˆì´ë”©: pyupbit, python-binance, ntplib, python-dateutil
- ê¸°íƒ€: pyzmq, pyttsx3
- TA-Lib (íœ  íŒŒì¼)

### íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸

```batch
# 32ë¹„íŠ¸ í™˜ê²½
venv_32bit\Scripts\activate.bat
pip install --upgrade -r requirements_32bit.txt
deactivate

# 64ë¹„íŠ¸ í™˜ê²½
venv_64bit\Scripts\activate.bat
pip install --upgrade -r requirements_64bit.txt
deactivate
```

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Q1: ê°€ìƒí™˜ê²½ì´ ìƒì„±ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤

**í™•ì¸ì‚¬í•­**:
1. Python 32ë¹„íŠ¸ì™€ 64ë¹„íŠ¸ê°€ ëª¨ë‘ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
2. `python --version` ë° `python64 --version` ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
3. ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ”ì§€ í™•ì¸

**í•´ê²°ë°©ë²•**:
```batch
# setup_venv.batì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì¬ì‹¤í–‰
setup_venv.bat
```

### Q2: Kiwoom API ë¡œê·¸ì¸ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤

**í™•ì¸ì‚¬í•­**:
1. 32ë¹„íŠ¸ ê°€ìƒí™˜ê²½ì´ ì œëŒ€ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
2. `utility/setting.py`ì—ì„œ `PYTHON_32BIT` ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
3. Kiwoom OpenAPIê°€ `C:/OpenAPI`ì— ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

**í•´ê²°ë°©ë²•**:
```batch
# ê°€ìƒí™˜ê²½ ì¬ìƒì„±
rmdir /S /Q venv_32bit venv_64bit
setup_venv.bat
```

### Q3: íŒ¨í‚¤ì§€ ì„í¬íŠ¸ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤

**í•´ê²°ë°©ë²•**:
```batch
# ì˜ì¡´ì„± ì¬ì„¤ì¹˜
setup_venv.bat

# ë˜ëŠ” íŠ¹ì • íŒ¨í‚¤ì§€ ìˆ˜ë™ ì„¤ì¹˜
venv_64bit\Scripts\activate.bat
pip install [íŒ¨í‚¤ì§€ëª…]
deactivate
```

### Q4: TA-Lib ì„¤ì¹˜ê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤

**í™•ì¸ì‚¬í•­**:
1. `utility/` í´ë”ì— TA-Lib íœ  íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
   - 32ë¹„íŠ¸: `TA_Lib-0.4.27-cp311-cp311-win32.whl`
   - 64ë¹„íŠ¸: `TA_Lib-0.4.25-cp311-cp311-win_amd64.whl`

**í•´ê²°ë°©ë²•**:
```batch
# ìˆ˜ë™ ì„¤ì¹˜
venv_32bit\Scripts\activate.bat
pip install utility/TA_Lib-0.4.27-cp311-cp311-win32.whl
deactivate

venv_64bit\Scripts\activate.bat
pip install utility/TA_Lib-0.4.25-cp311-cp311-win_amd64.whl
deactivate
```

### Q5: ë ˆê±°ì‹œ ëª¨ë“œë¡œ ë¡¤ë°±í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤

**ë¡¤ë°± ë°©ë²•**:
1. ê¸°ì¡´ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸(`stom.bat`) ì‚¬ìš©
2. ë˜ëŠ” ê°€ìƒí™˜ê²½ í´ë” ì‚­ì œ:
```batch
rmdir /S /Q venv_32bit
rmdir /S /Q venv_64bit
```

## ğŸ“ˆ ì„±ëŠ¥ ë¹„êµ

| í•­ëª© | ë ˆê±°ì‹œ ëª¨ë“œ | ê°€ìƒí™˜ê²½ ëª¨ë“œ |
|-----|-----------|-------------|
| ì‹œì‘ ì‹œê°„ | ê¸°ì¤€ | Â±10% |
| ë©”ëª¨ë¦¬ ì‚¬ìš© | ê¸°ì¤€ | +15% |
| ë°±í…ŒìŠ¤íŒ… ì†ë„ | ê¸°ì¤€ | ë™ì¼ |
| í™˜ê²½ ì¬í˜„ì„± | âŒ ë‚®ìŒ | âœ… ë†’ìŒ |
| ì˜ì¡´ì„± ê´€ë¦¬ | âŒ ì·¨ì•½ | âœ… ê°•ë ¥ |
| ë¡¤ë°± ê°€ëŠ¥ì„± | âŒ ë¶ˆê°€ëŠ¥ | âœ… ê°€ëŠ¥ |

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Phase 0: ì‚¬ì „ ì¤€ë¹„ - ì˜ì¡´ì„± ì¶”ì¶œ
- [x] Phase 1: Requirements íŒŒì¼ ìƒì„±
- [x] Phase 1: TA-Lib ìœ„ì¹˜ (utility/ í´ë” ì‚¬ìš©)
- [x] Phase 1: í†µí•© ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (setup_venv.bat)
- [x] Phase 2: ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [x] Phase 3: utility/setting.py ìˆ˜ì •
- [x] Phase 3: ui/ui_mainwindow.py ìˆ˜ì •
- [x] Phase 4: í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ í¬í•¨
- [x] ìµœì¢…: ë¬¸ì„œí™” ì™„ë£Œ

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [ê°€ìƒí™˜ê²½ êµ¬ì¶• ì—°êµ¬ ë³´ê³ ì„œ](docs/ê°€ìƒí™˜ê²½êµ¬ì¶•ì—°êµ¬/STOM_ê°€ìƒí™˜ê²½_êµ¬ì¶•_ì—°êµ¬ë³´ê³ ì„œ.md)
- [Python venv ê³µì‹ ë¬¸ì„œ](https://docs.python.org/3/library/venv.html)

## ğŸ†˜ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•œ ê²½ìš°:
1. `setup_venv.bat` ì¬ì‹¤í–‰ (ìë™ ê²€ì¦ í¬í•¨)
2. ë¡œê·¸ íŒŒì¼ í™•ì¸
3. ê°€ìƒí™˜ê²½ ì¬ìƒì„± ì‹œë„

---

**ë¬¸ì„œ ë²„ì „**: 2.0
**ì‘ì„±ì¼**: 2025-01-04
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-01-04
**ì£¼ìš” ë³€ê²½**: scripts í´ë” ì œê±°, setup_venv.bat í†µí•©, utility í´ë”ë¡œ TA-Lib ê²½ë¡œ ë³€ê²½
